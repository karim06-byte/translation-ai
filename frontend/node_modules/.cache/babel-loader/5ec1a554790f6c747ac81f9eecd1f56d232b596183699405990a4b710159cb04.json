{"ast":null,"code":"var _jsxFileName = \"/Users/airgroupairgroup/Desktop/MinA/Translation-AI/frontend/src/components/BookView.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Container, Paper, Typography, Box, Button, TextField, Dialog, DialogTitle, DialogContent, DialogActions, Select, MenuItem, FormControl, InputLabel, Grid, AppBar, Toolbar, IconButton } from '@mui/material';\nimport { ArrowBack, Edit, Check, Close } from '@mui/icons-material';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction BookView() {\n  _s();\n  const {\n    bookId\n  } = useParams();\n  const navigate = useNavigate();\n  const [segments, setSegments] = useState([]);\n  const [book, setBook] = useState(null);\n  const [selectedSegment, setSelectedSegment] = useState(null);\n  const [overrideDialogOpen, setOverrideDialogOpen] = useState(false);\n  const [newTranslation, setNewTranslation] = useState('');\n  const [engine, setEngine] = useState('gemini');\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    fetchBook();\n    fetchSegments();\n\n    // Auto-refresh segments every 5 seconds to see translation progress\n    const interval = setInterval(() => {\n      fetchSegments();\n    }, 5000);\n    return () => clearInterval(interval);\n  }, [bookId]);\n  const fetchBook = async () => {\n    try {\n      const response = await axios.get(`/api/books/${bookId}`);\n      setBook(response.data);\n    } catch (error) {\n      console.error('Error fetching book:', error);\n    }\n  };\n  const fetchSegments = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get(`/api/segments/book/${bookId}?page=1&page_size=100&include_metrics=true`);\n      console.log('Fetched segments:', response.data.segments.length);\n      setSegments(response.data.segments);\n    } catch (error) {\n      console.error('Error fetching segments:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleTranslateAll = async () => {\n    if (!window.confirm('This will translate all pending segments. This may take a while. Continue?')) {\n      return;\n    }\n    try {\n      // Use sync=false for background, but you can test with sync=true\n      const response = await axios.post(`/api/books/${bookId}/translate-all?sync=false`);\n      alert(response.data.message || 'Translation started! Check terminal for progress.');\n      // Refresh segments periodically\n      const refreshInterval = setInterval(() => {\n        fetchSegments();\n        // Stop refreshing if all segments are translated\n        const allTranslated = segments.every(s => s.translated_az || s.status === 'translated');\n        if (allTranslated) {\n          clearInterval(refreshInterval);\n        }\n      }, 3000);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Error starting translation:', error);\n      alert('Error starting translation: ' + (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.detail) || error.message));\n    }\n  };\n  const handleTranslate = async (segmentId, sourceText) => {\n    try {\n      const response = await axios.post('/api/translate', {\n        source_en: sourceText,\n        segment_id: segmentId\n      });\n\n      // Update segment in local state\n      setSegments(prev => prev.map(s => s.id === segmentId ? {\n        ...s,\n        translated_az: response.data.translated_az,\n        status: 'translated'\n      } : s));\n    } catch (error) {\n      console.error('Error translating:', error);\n      alert('Error translating segment');\n    }\n  };\n  const handleRetranslate = async (segmentId, sourceText) => {\n    try {\n      const response = await axios.post('/api/translate/retranslate', {\n        segment_id: segmentId,\n        engine: engine,\n        source_text: sourceText\n      });\n      setNewTranslation(response.data.new_translation);\n    } catch (error) {\n      console.error('Error retranslating:', error);\n      alert('Error retranslating segment');\n    }\n  };\n  const handleOverride = async () => {\n    if (!selectedSegment || !newTranslation) return;\n    try {\n      const response = await axios.post(`/api/segments/${selectedSegment.id}/override`, {\n        segment_id: selectedSegment.id,\n        new_translation: newTranslation,\n        engine: engine\n      });\n      console.log('Override response:', response.data);\n\n      // Close dialog first\n      setOverrideDialogOpen(false);\n      setSelectedSegment(null);\n      setNewTranslation('');\n\n      // Force refresh segments from server to get all updated data\n      setLoading(true);\n      await fetchSegments();\n      alert('Override saved successfully! The translation has been updated.');\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error('Error overriding:', error);\n      alert('Error saving override: ' + (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.detail) || error.message));\n    }\n  };\n  const openOverrideDialog = segment => {\n    setSelectedSegment(segment);\n    setNewTranslation(segment.translated_az || '');\n    setOverrideDialogOpen(true);\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      position: \"static\",\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          edge: \"start\",\n          color: \"inherit\",\n          onClick: () => navigate('/'),\n          children: /*#__PURE__*/_jsxDEV(ArrowBack, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          component: \"div\",\n          sx: {\n            flexGrow: 1\n          },\n          children: (book === null || book === void 0 ? void 0 : book.title_en) || 'Book'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"lg\",\n      sx: {\n        mt: 4,\n        mb: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mb: 3,\n          display: 'flex',\n          gap: 2,\n          alignItems: 'center',\n          justifyContent: 'space-between'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          children: [segments.filter(s => s.status === 'translated' || s.translated_az).length, \" / \", segments.length, \" segments translated\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this), segments.some(s => s.status === 'pending' || !s.translated_az) && /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: handleTranslateAll,\n          children: \"Translate All Pending\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }, this), segments.map(segment => /*#__PURE__*/_jsxDEV(Paper, {\n        sx: {\n          p: 3,\n          mb: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 2,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            md: 6,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle2\",\n              color: \"text.secondary\",\n              children: \"English (Source)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              sx: {\n                mb: 2\n              },\n              children: segment.source_en\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            md: 6,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle2\",\n              color: \"text.secondary\",\n              children: \"Azerbaijani (Translation)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              sx: {\n                mb: 2\n              },\n              children: segment.translated_az || 'Not translated'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 17\n            }, this), segment.translated_az && /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                mt: 2,\n                p: 2,\n                bgcolor: 'grey.50',\n                borderRadius: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"subtitle2\",\n                gutterBottom: true,\n                children: \"Translation Metrics\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                spacing: 1,\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  children: /*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      mb: 1\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"caption\",\n                      color: \"text.secondary\",\n                      display: \"block\",\n                      children: \"Translation Source Breakdown:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 223,\n                      columnNumber: 27\n                    }, this), (() => {\n                      // Calculate percentages that sum to 100%\n                      let overridePct = 0;\n                      let styleMemoryPct = 0;\n                      let modelPct = 0;\n                      if (segment.has_override) {\n                        // If overridden, override is 100%, others are 0%\n                        overridePct = 100;\n                        styleMemoryPct = 0;\n                        modelPct = 0;\n                      } else if (segment.from_style_memory) {\n                        // If from style memory, use style_similarity_score\n                        const styleScore = segment.style_similarity_score || 0;\n                        styleMemoryPct = styleScore * 100;\n                        modelPct = (1 - styleScore) * 100;\n                        overridePct = 0;\n                      } else {\n                        // If from model, model is 100%\n                        modelPct = 100;\n                        styleMemoryPct = 0;\n                        overridePct = 0;\n                      }\n\n                      // Ensure they sum to exactly 100% (handle rounding)\n                      const total = overridePct + styleMemoryPct + modelPct;\n                      if (total !== 100) {\n                        // Adjust model percentage to make it exactly 100%\n                        modelPct = 100 - overridePct - styleMemoryPct;\n                      }\n                      return /*#__PURE__*/_jsxDEV(Box, {\n                        sx: {\n                          display: 'flex',\n                          gap: 1,\n                          alignItems: 'center',\n                          mt: 0.5\n                        },\n                        children: [overridePct > 0 && /*#__PURE__*/_jsxDEV(Box, {\n                          sx: {\n                            flex: overridePct / 100,\n                            bgcolor: 'warning.light',\n                            p: 0.5,\n                            borderRadius: 0.5,\n                            textAlign: 'center'\n                          },\n                          children: /*#__PURE__*/_jsxDEV(Typography, {\n                            variant: \"caption\",\n                            sx: {\n                              fontWeight: 'bold',\n                              color: 'warning.dark'\n                            },\n                            children: [\"Override: \", overridePct.toFixed(1), \"%\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 261,\n                            columnNumber: 37\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 260,\n                          columnNumber: 35\n                        }, this), styleMemoryPct > 0 && /*#__PURE__*/_jsxDEV(Box, {\n                          sx: {\n                            flex: styleMemoryPct / 100,\n                            bgcolor: 'success.light',\n                            p: 0.5,\n                            borderRadius: 0.5,\n                            textAlign: 'center'\n                          },\n                          children: /*#__PURE__*/_jsxDEV(Typography, {\n                            variant: \"caption\",\n                            sx: {\n                              fontWeight: 'bold',\n                              color: 'success.dark'\n                            },\n                            children: [\"Style Memory: \", styleMemoryPct.toFixed(1), \"%\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 268,\n                            columnNumber: 37\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 267,\n                          columnNumber: 35\n                        }, this), modelPct > 0 && /*#__PURE__*/_jsxDEV(Box, {\n                          sx: {\n                            flex: modelPct / 100,\n                            bgcolor: 'primary.light',\n                            p: 0.5,\n                            borderRadius: 0.5,\n                            textAlign: 'center'\n                          },\n                          children: /*#__PURE__*/_jsxDEV(Typography, {\n                            variant: \"caption\",\n                            sx: {\n                              fontWeight: 'bold',\n                              color: 'primary.dark'\n                            },\n                            children: [\"AI Model: \", modelPct.toFixed(1), \"%\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 275,\n                            columnNumber: 37\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 274,\n                          columnNumber: 35\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 258,\n                        columnNumber: 31\n                      }, this);\n                    })()]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"caption\",\n                    color: \"text.secondary\",\n                    display: \"block\",\n                    sx: {\n                      mb: 0.5\n                    },\n                    children: \"Detailed Metrics:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 288,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    container: true,\n                    spacing: 1,\n                    children: [segment.style_similarity_score !== null && segment.style_similarity_score !== undefined && /*#__PURE__*/_jsxDEV(Grid, {\n                      item: true,\n                      xs: 4,\n                      children: [/*#__PURE__*/_jsxDEV(Typography, {\n                        variant: \"caption\",\n                        color: \"text.secondary\",\n                        display: \"block\",\n                        children: \"Style Similarity:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 294,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                        variant: \"body2\",\n                        sx: {\n                          fontWeight: 'bold'\n                        },\n                        children: [(segment.style_similarity_score * 100).toFixed(1), \"%\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 297,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 293,\n                      columnNumber: 29\n                    }, this), segment.has_override && segment.override_similarity_score !== null && segment.override_similarity_score !== undefined && /*#__PURE__*/_jsxDEV(Grid, {\n                      item: true,\n                      xs: 4,\n                      children: [/*#__PURE__*/_jsxDEV(Typography, {\n                        variant: \"caption\",\n                        color: \"text.secondary\",\n                        display: \"block\",\n                        children: \"Override Similarity:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 305,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                        variant: \"body2\",\n                        sx: {\n                          fontWeight: 'bold'\n                        },\n                        children: [(segment.override_similarity_score * 100).toFixed(1), \"%\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 308,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 304,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 291,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            gap: 1,\n            mt: 2\n          },\n          children: [!segment.translated_az && /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            size: \"small\",\n            onClick: () => handleTranslate(segment.id, segment.source_en),\n            children: \"Translate\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            size: \"small\",\n            startIcon: /*#__PURE__*/_jsxDEV(Edit, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 28\n            }, this),\n            onClick: () => openOverrideDialog(segment),\n            children: \"Edit/Override\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 13\n        }, this)]\n      }, segment.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: overrideDialogOpen,\n      onClose: () => setOverrideDialogOpen(false),\n      maxWidth: \"md\",\n      fullWidth: true,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: \"Override Translation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle2\",\n          sx: {\n            mb: 1\n          },\n          children: \"Source (English):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          sx: {\n            mb: 2,\n            p: 1,\n            bgcolor: 'grey.100'\n          },\n          children: selectedSegment === null || selectedSegment === void 0 ? void 0 : selectedSegment.source_en\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          fullWidth: true,\n          sx: {\n            mb: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n            children: \"Translation Engine\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            value: engine,\n            onChange: e => setEngine(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n              value: \"gemini\",\n              children: \"Gemini\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: \"chatgpt\",\n              children: \"ChatGPT\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          onClick: () => handleRetranslate(selectedSegment === null || selectedSegment === void 0 ? void 0 : selectedSegment.id, selectedSegment === null || selectedSegment === void 0 ? void 0 : selectedSegment.source_en),\n          sx: {\n            mb: 2\n          },\n          children: [\"Retranslate with \", engine]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          multiline: true,\n          rows: 6,\n          label: \"New Translation\",\n          value: newTranslation,\n          onChange: e => setNewTranslation(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setOverrideDialogOpen(false),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleOverride,\n          variant: \"contained\",\n          startIcon: /*#__PURE__*/_jsxDEV(Check, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 75\n          }, this),\n          children: \"Save Override\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 166,\n    columnNumber: 5\n  }, this);\n}\n_s(BookView, \"efrhgBF6Ufv5owIfF38r6JMxYtg=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = BookView;\nexport default BookView;\nvar _c;\n$RefreshReg$(_c, \"BookView\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Container","Paper","Typography","Box","Button","TextField","Dialog","DialogTitle","DialogContent","DialogActions","Select","MenuItem","FormControl","InputLabel","Grid","AppBar","Toolbar","IconButton","ArrowBack","Edit","Check","Close","axios","jsxDEV","_jsxDEV","BookView","_s","bookId","navigate","segments","setSegments","book","setBook","selectedSegment","setSelectedSegment","overrideDialogOpen","setOverrideDialogOpen","newTranslation","setNewTranslation","engine","setEngine","loading","setLoading","fetchBook","fetchSegments","interval","setInterval","clearInterval","response","get","data","error","console","log","length","handleTranslateAll","window","confirm","post","alert","message","refreshInterval","allTranslated","every","s","translated_az","status","_error$response","_error$response$data","detail","handleTranslate","segmentId","sourceText","source_en","segment_id","prev","map","id","handleRetranslate","source_text","new_translation","handleOverride","_error$response2","_error$response2$data","openOverrideDialog","segment","children","position","edge","color","onClick","fileName","_jsxFileName","lineNumber","columnNumber","variant","component","sx","flexGrow","title_en","maxWidth","mt","mb","display","gap","alignItems","justifyContent","filter","some","p","container","spacing","item","xs","md","bgcolor","borderRadius","gutterBottom","overridePct","styleMemoryPct","modelPct","has_override","from_style_memory","styleScore","style_similarity_score","total","flex","textAlign","fontWeight","toFixed","undefined","override_similarity_score","size","startIcon","open","onClose","fullWidth","value","onChange","e","target","multiline","rows","label","_c","$RefreshReg$"],"sources":["/Users/airgroupairgroup/Desktop/MinA/Translation-AI/frontend/src/components/BookView.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport {\n  Container,\n  Paper,\n  Typography,\n  Box,\n  Button,\n  TextField,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Select,\n  MenuItem,\n  FormControl,\n  InputLabel,\n  Grid,\n  AppBar,\n  Toolbar,\n  IconButton,\n} from '@mui/material';\nimport { ArrowBack, Edit, Check, Close } from '@mui/icons-material';\nimport axios from 'axios';\n\nfunction BookView() {\n  const { bookId } = useParams();\n  const navigate = useNavigate();\n  const [segments, setSegments] = useState([]);\n  const [book, setBook] = useState(null);\n  const [selectedSegment, setSelectedSegment] = useState(null);\n  const [overrideDialogOpen, setOverrideDialogOpen] = useState(false);\n  const [newTranslation, setNewTranslation] = useState('');\n  const [engine, setEngine] = useState('gemini');\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchBook();\n    fetchSegments();\n    \n    // Auto-refresh segments every 5 seconds to see translation progress\n    const interval = setInterval(() => {\n      fetchSegments();\n    }, 5000);\n    \n    return () => clearInterval(interval);\n  }, [bookId]);\n\n  const fetchBook = async () => {\n    try {\n      const response = await axios.get(`/api/books/${bookId}`);\n      setBook(response.data);\n    } catch (error) {\n      console.error('Error fetching book:', error);\n    }\n  };\n\n  const fetchSegments = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get(`/api/segments/book/${bookId}?page=1&page_size=100&include_metrics=true`);\n      console.log('Fetched segments:', response.data.segments.length);\n      setSegments(response.data.segments);\n    } catch (error) {\n      console.error('Error fetching segments:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleTranslateAll = async () => {\n    if (!window.confirm('This will translate all pending segments. This may take a while. Continue?')) {\n      return;\n    }\n    \n    try {\n      // Use sync=false for background, but you can test with sync=true\n      const response = await axios.post(`/api/books/${bookId}/translate-all?sync=false`);\n      alert(response.data.message || 'Translation started! Check terminal for progress.');\n      // Refresh segments periodically\n      const refreshInterval = setInterval(() => {\n        fetchSegments();\n        // Stop refreshing if all segments are translated\n        const allTranslated = segments.every(s => s.translated_az || s.status === 'translated');\n        if (allTranslated) {\n          clearInterval(refreshInterval);\n        }\n      }, 3000);\n    } catch (error) {\n      console.error('Error starting translation:', error);\n      alert('Error starting translation: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const handleTranslate = async (segmentId, sourceText) => {\n    try {\n      const response = await axios.post('/api/translate', {\n        source_en: sourceText,\n        segment_id: segmentId,\n      });\n      \n      // Update segment in local state\n      setSegments((prev) =>\n        prev.map((s) =>\n          s.id === segmentId\n            ? { ...s, translated_az: response.data.translated_az, status: 'translated' }\n            : s\n        )\n      );\n    } catch (error) {\n      console.error('Error translating:', error);\n      alert('Error translating segment');\n    }\n  };\n\n  const handleRetranslate = async (segmentId, sourceText) => {\n    try {\n      const response = await axios.post('/api/translate/retranslate', {\n        segment_id: segmentId,\n        engine: engine,\n        source_text: sourceText,\n      });\n      \n      setNewTranslation(response.data.new_translation);\n    } catch (error) {\n      console.error('Error retranslating:', error);\n      alert('Error retranslating segment');\n    }\n  };\n\n  const handleOverride = async () => {\n    if (!selectedSegment || !newTranslation) return;\n\n    try {\n      const response = await axios.post(`/api/segments/${selectedSegment.id}/override`, {\n        segment_id: selectedSegment.id,\n        new_translation: newTranslation,\n        engine: engine,\n      });\n\n      console.log('Override response:', response.data);\n\n      // Close dialog first\n      setOverrideDialogOpen(false);\n      setSelectedSegment(null);\n      setNewTranslation('');\n      \n      // Force refresh segments from server to get all updated data\n      setLoading(true);\n      await fetchSegments();\n      \n      alert('Override saved successfully! The translation has been updated.');\n    } catch (error) {\n      console.error('Error overriding:', error);\n      alert('Error saving override: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const openOverrideDialog = (segment) => {\n    setSelectedSegment(segment);\n    setNewTranslation(segment.translated_az || '');\n    setOverrideDialogOpen(true);\n  };\n\n  return (\n    <Box>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <IconButton edge=\"start\" color=\"inherit\" onClick={() => navigate('/')}>\n            <ArrowBack />\n          </IconButton>\n          <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\n            {book?.title_en || 'Book'}\n          </Typography>\n        </Toolbar>\n      </AppBar>\n\n      <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\n        <Box sx={{ mb: 3, display: 'flex', gap: 2, alignItems: 'center', justifyContent: 'space-between' }}>\n          <Typography variant=\"h6\">\n            {segments.filter(s => s.status === 'translated' || s.translated_az).length} / {segments.length} segments translated\n          </Typography>\n          {segments.some(s => s.status === 'pending' || !s.translated_az) && (\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={handleTranslateAll}\n            >\n              Translate All Pending\n            </Button>\n          )}\n        </Box>\n        \n        {segments.map((segment) => (\n          <Paper key={segment.id} sx={{ p: 3, mb: 2 }}>\n            <Grid container spacing={2}>\n              <Grid item xs={12} md={6}>\n                <Typography variant=\"subtitle2\" color=\"text.secondary\">\n                  English (Source)\n                </Typography>\n                <Typography variant=\"body1\" sx={{ mb: 2 }}>\n                  {segment.source_en}\n                </Typography>\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <Typography variant=\"subtitle2\" color=\"text.secondary\">\n                  Azerbaijani (Translation)\n                </Typography>\n                <Typography variant=\"body1\" sx={{ mb: 2 }}>\n                  {segment.translated_az || 'Not translated'}\n                </Typography>\n                \n                {/* Segment Metrics */}\n                {segment.translated_az && (\n                  <Box sx={{ mt: 2, p: 2, bgcolor: 'grey.50', borderRadius: 1 }}>\n                    <Typography variant=\"subtitle2\" gutterBottom>\n                      Translation Metrics\n                    </Typography>\n                    <Grid container spacing={1}>\n                      {/* Translation Source Breakdown - Must sum to 100% */}\n                      <Grid item xs={12}>\n                        <Box sx={{ mb: 1 }}>\n                          <Typography variant=\"caption\" color=\"text.secondary\" display=\"block\">\n                            Translation Source Breakdown:\n                          </Typography>\n                          {(() => {\n                            // Calculate percentages that sum to 100%\n                            let overridePct = 0;\n                            let styleMemoryPct = 0;\n                            let modelPct = 0;\n                            \n                            if (segment.has_override) {\n                              // If overridden, override is 100%, others are 0%\n                              overridePct = 100;\n                              styleMemoryPct = 0;\n                              modelPct = 0;\n                            } else if (segment.from_style_memory) {\n                              // If from style memory, use style_similarity_score\n                              const styleScore = segment.style_similarity_score || 0;\n                              styleMemoryPct = (styleScore * 100);\n                              modelPct = ((1 - styleScore) * 100);\n                              overridePct = 0;\n                            } else {\n                              // If from model, model is 100%\n                              modelPct = 100;\n                              styleMemoryPct = 0;\n                              overridePct = 0;\n                            }\n                            \n                            // Ensure they sum to exactly 100% (handle rounding)\n                            const total = overridePct + styleMemoryPct + modelPct;\n                            if (total !== 100) {\n                              // Adjust model percentage to make it exactly 100%\n                              modelPct = 100 - overridePct - styleMemoryPct;\n                            }\n                            \n                            return (\n                              <Box sx={{ display: 'flex', gap: 1, alignItems: 'center', mt: 0.5 }}>\n                                {overridePct > 0 && (\n                                  <Box sx={{ flex: overridePct / 100, bgcolor: 'warning.light', p: 0.5, borderRadius: 0.5, textAlign: 'center' }}>\n                                    <Typography variant=\"caption\" sx={{ fontWeight: 'bold', color: 'warning.dark' }}>\n                                      Override: {overridePct.toFixed(1)}%\n                                    </Typography>\n                                  </Box>\n                                )}\n                                {styleMemoryPct > 0 && (\n                                  <Box sx={{ flex: styleMemoryPct / 100, bgcolor: 'success.light', p: 0.5, borderRadius: 0.5, textAlign: 'center' }}>\n                                    <Typography variant=\"caption\" sx={{ fontWeight: 'bold', color: 'success.dark' }}>\n                                      Style Memory: {styleMemoryPct.toFixed(1)}%\n                                    </Typography>\n                                  </Box>\n                                )}\n                                {modelPct > 0 && (\n                                  <Box sx={{ flex: modelPct / 100, bgcolor: 'primary.light', p: 0.5, borderRadius: 0.5, textAlign: 'center' }}>\n                                    <Typography variant=\"caption\" sx={{ fontWeight: 'bold', color: 'primary.dark' }}>\n                                      AI Model: {modelPct.toFixed(1)}%\n                                    </Typography>\n                                  </Box>\n                                )}\n                              </Box>\n                            );\n                          })()}\n                        </Box>\n                      </Grid>\n                      \n                      {/* Detailed Metrics */}\n                      <Grid item xs={12}>\n                        <Typography variant=\"caption\" color=\"text.secondary\" display=\"block\" sx={{ mb: 0.5 }}>\n                          Detailed Metrics:\n                        </Typography>\n                        <Grid container spacing={1}>\n                          {segment.style_similarity_score !== null && segment.style_similarity_score !== undefined && (\n                            <Grid item xs={4}>\n                              <Typography variant=\"caption\" color=\"text.secondary\" display=\"block\">\n                                Style Similarity:\n                              </Typography>\n                              <Typography variant=\"body2\" sx={{ fontWeight: 'bold' }}>\n                                {(segment.style_similarity_score * 100).toFixed(1)}%\n                              </Typography>\n                            </Grid>\n                          )}\n                          \n                          {segment.has_override && segment.override_similarity_score !== null && segment.override_similarity_score !== undefined && (\n                            <Grid item xs={4}>\n                              <Typography variant=\"caption\" color=\"text.secondary\" display=\"block\">\n                                Override Similarity:\n                              </Typography>\n                              <Typography variant=\"body2\" sx={{ fontWeight: 'bold' }}>\n                                {(segment.override_similarity_score * 100).toFixed(1)}%\n                              </Typography>\n                            </Grid>\n                          )}\n                        </Grid>\n                      </Grid>\n                    </Grid>\n                  </Box>\n                )}\n              </Grid>\n            </Grid>\n\n            <Box sx={{ display: 'flex', gap: 1, mt: 2 }}>\n              {!segment.translated_az && (\n                <Button\n                  variant=\"outlined\"\n                  size=\"small\"\n                  onClick={() => handleTranslate(segment.id, segment.source_en)}\n                >\n                  Translate\n                </Button>\n              )}\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                startIcon={<Edit />}\n                onClick={() => openOverrideDialog(segment)}\n              >\n                Edit/Override\n              </Button>\n            </Box>\n          </Paper>\n        ))}\n      </Container>\n\n      <Dialog open={overrideDialogOpen} onClose={() => setOverrideDialogOpen(false)} maxWidth=\"md\" fullWidth>\n        <DialogTitle>Override Translation</DialogTitle>\n        <DialogContent>\n          <Typography variant=\"subtitle2\" sx={{ mb: 1 }}>\n            Source (English):\n          </Typography>\n          <Typography variant=\"body2\" sx={{ mb: 2, p: 1, bgcolor: 'grey.100' }}>\n            {selectedSegment?.source_en}\n          </Typography>\n\n          <FormControl fullWidth sx={{ mb: 2 }}>\n            <InputLabel>Translation Engine</InputLabel>\n            <Select value={engine} onChange={(e) => setEngine(e.target.value)}>\n              <MenuItem value=\"gemini\">Gemini</MenuItem>\n              <MenuItem value=\"chatgpt\">ChatGPT</MenuItem>\n            </Select>\n          </FormControl>\n\n          <Button\n            variant=\"outlined\"\n            onClick={() => handleRetranslate(selectedSegment?.id, selectedSegment?.source_en)}\n            sx={{ mb: 2 }}\n          >\n            Retranslate with {engine}\n          </Button>\n\n          <TextField\n            fullWidth\n            multiline\n            rows={6}\n            label=\"New Translation\"\n            value={newTranslation}\n            onChange={(e) => setNewTranslation(e.target.value)}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOverrideDialogOpen(false)}>Cancel</Button>\n          <Button onClick={handleOverride} variant=\"contained\" startIcon={<Check />}>\n            Save Override\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n}\n\nexport default BookView;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}