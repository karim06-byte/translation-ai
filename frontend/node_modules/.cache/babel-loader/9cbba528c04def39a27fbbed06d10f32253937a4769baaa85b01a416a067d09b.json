{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{Container,Paper,Typography,Box,Grid,Card,CardContent,AppBar,Toolbar,IconButton,Button}from'@mui/material';import{ArrowBack,Assessment,Refresh}from'@mui/icons-material';import{LineChart,Line,XAxis,YAxis,CartesianGrid,Tooltip,Legend,ResponsiveContainer}from'recharts';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Metrics(){var _metrics$bleu,_metrics$chrf,_metrics$style_simila,_metrics$manual_overr,_metrics$attribution_;const navigate=useNavigate();const[metrics,setMetrics]=useState(null);const[loading,setLoading]=useState(true);const[retraining,setRetraining]=useState(false);useEffect(()=>{fetchMetrics();},[]);const fetchMetrics=async()=>{try{const response=await axios.get('/api/metrics/summary');setMetrics(response.data);}catch(error){console.error('Error fetching metrics:',error);}finally{setLoading(false);}};const handleRetrain=async()=>{if(!window.confirm('This will retrain the model with current override data. This may take a while. Continue?')){return;}setRetraining(true);try{const response=await axios.post('/api/metrics/retrain');if(response.data.can_retrain){alert('Retraining started! Check terminal for progress.');}else{alert(response.data.message);}}catch(error){var _error$response,_error$response$data;console.error('Error starting retraining:',error);alert('Error starting retraining: '+(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||error.message));}finally{setRetraining(false);}};const metricCards=[{title:'BLEU Score',value:(metrics===null||metrics===void 0?void 0:(_metrics$bleu=metrics.bleu)===null||_metrics$bleu===void 0?void 0:_metrics$bleu.toFixed(2))||'N/A',color:'#1976d2'},{title:'ChrF Score',value:(metrics===null||metrics===void 0?void 0:(_metrics$chrf=metrics.chrf)===null||_metrics$chrf===void 0?void 0:_metrics$chrf.toFixed(2))||'N/A',color:'#2e7d32'},{title:'Style Similarity',value:(metrics===null||metrics===void 0?void 0:(_metrics$style_simila=metrics.style_similarity_score)===null||_metrics$style_simila===void 0?void 0:_metrics$style_simila.toFixed(2))||'N/A',color:'#ed6c02'},{title:'Override Rate',value:(metrics===null||metrics===void 0?void 0:(_metrics$manual_overr=metrics.manual_override_rate)===null||_metrics$manual_overr===void 0?void 0:_metrics$manual_overr.toFixed(2))+'%'||'N/A',color:'#d32f2f'},{title:'Attribution Ratio',value:(metrics===null||metrics===void 0?void 0:(_metrics$attribution_=metrics.attribution_ratio)===null||_metrics$attribution_===void 0?void 0:_metrics$attribution_.toFixed(2))+'%'||'N/A',color:'#9c27b0'}];return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(AppBar,{position:\"static\",children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(IconButton,{edge:\"start\",color:\"inherit\",onClick:()=>navigate('/'),children:/*#__PURE__*/_jsx(ArrowBack,{})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"div\",sx:{flexGrow:1},children:\"Metrics Dashboard\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",startIcon:/*#__PURE__*/_jsx(Refresh,{}),onClick:handleRetrain,disabled:retraining,children:retraining?'Retraining...':'Retrain Model'})]})}),/*#__PURE__*/_jsxs(Container,{maxWidth:\"lg\",sx:{mt:4,mb:4},children:[/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:metricCards.map((card,index)=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:card.title}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",sx:{color:card.color},children:card.value})]})})},index))}),/*#__PURE__*/_jsxs(Paper,{sx:{p:3,mt:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Translation Quality Metrics\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"These metrics help track the quality and style preservation of translations.\"})]})]})]});}export default Metrics;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Container","Paper","Typography","Box","Grid","Card","CardContent","AppBar","Toolbar","IconButton","Button","ArrowBack","Assessment","Refresh","LineChart","Line","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","axios","jsx","_jsx","jsxs","_jsxs","Metrics","_metrics$bleu","_metrics$chrf","_metrics$style_simila","_metrics$manual_overr","_metrics$attribution_","navigate","metrics","setMetrics","loading","setLoading","retraining","setRetraining","fetchMetrics","response","get","data","error","console","handleRetrain","window","confirm","post","can_retrain","alert","message","_error$response","_error$response$data","detail","metricCards","title","value","bleu","toFixed","color","chrf","style_similarity_score","manual_override_rate","attribution_ratio","children","position","edge","onClick","variant","component","sx","flexGrow","startIcon","disabled","maxWidth","mt","mb","container","spacing","map","card","index","item","xs","sm","md","gutterBottom","p"],"sources":["/Users/airgroupairgroup/Desktop/MinA/Translation-AI/frontend/src/components/Metrics.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Container,\n  Paper,\n  Typography,\n  Box,\n  Grid,\n  Card,\n  CardContent,\n  AppBar,\n  Toolbar,\n  IconButton,\n  Button,\n} from '@mui/material';\nimport { ArrowBack, Assessment, Refresh } from '@mui/icons-material';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport axios from 'axios';\n\nfunction Metrics() {\n  const navigate = useNavigate();\n  const [metrics, setMetrics] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [retraining, setRetraining] = useState(false);\n\n  useEffect(() => {\n    fetchMetrics();\n  }, []);\n\n  const fetchMetrics = async () => {\n    try {\n      const response = await axios.get('/api/metrics/summary');\n      setMetrics(response.data);\n    } catch (error) {\n      console.error('Error fetching metrics:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRetrain = async () => {\n    if (!window.confirm('This will retrain the model with current override data. This may take a while. Continue?')) {\n      return;\n    }\n    \n    setRetraining(true);\n    try {\n      const response = await axios.post('/api/metrics/retrain');\n      if (response.data.can_retrain) {\n        alert('Retraining started! Check terminal for progress.');\n      } else {\n        alert(response.data.message);\n      }\n    } catch (error) {\n      console.error('Error starting retraining:', error);\n      alert('Error starting retraining: ' + (error.response?.data?.detail || error.message));\n    } finally {\n      setRetraining(false);\n    }\n  };\n\n  const metricCards = [\n    { title: 'BLEU Score', value: metrics?.bleu?.toFixed(2) || 'N/A', color: '#1976d2' },\n    { title: 'ChrF Score', value: metrics?.chrf?.toFixed(2) || 'N/A', color: '#2e7d32' },\n    { title: 'Style Similarity', value: metrics?.style_similarity_score?.toFixed(2) || 'N/A', color: '#ed6c02' },\n    { title: 'Override Rate', value: metrics?.manual_override_rate?.toFixed(2) + '%' || 'N/A', color: '#d32f2f' },\n    { title: 'Attribution Ratio', value: metrics?.attribution_ratio?.toFixed(2) + '%' || 'N/A', color: '#9c27b0' },\n  ];\n\n  return (\n    <Box>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <IconButton edge=\"start\" color=\"inherit\" onClick={() => navigate('/')}>\n            <ArrowBack />\n          </IconButton>\n          <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\n            Metrics Dashboard\n          </Typography>\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            startIcon={<Refresh />}\n            onClick={handleRetrain}\n            disabled={retraining}\n          >\n            {retraining ? 'Retraining...' : 'Retrain Model'}\n          </Button>\n        </Toolbar>\n      </AppBar>\n\n      <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\n        <Grid container spacing={3}>\n          {metricCards.map((card, index) => (\n            <Grid item xs={12} sm={6} md={4} key={index}>\n              <Card>\n                <CardContent>\n                  <Typography color=\"textSecondary\" gutterBottom>\n                    {card.title}\n                  </Typography>\n                  <Typography variant=\"h4\" sx={{ color: card.color }}>\n                    {card.value}\n                  </Typography>\n                </CardContent>\n              </Card>\n            </Grid>\n          ))}\n        </Grid>\n\n        <Paper sx={{ p: 3, mt: 4 }}>\n          <Typography variant=\"h6\" gutterBottom>\n            Translation Quality Metrics\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            These metrics help track the quality and style preservation of translations.\n          </Typography>\n        </Paper>\n      </Container>\n    </Box>\n  );\n}\n\nexport default Metrics;\n\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OACEC,SAAS,CACTC,KAAK,CACLC,UAAU,CACVC,GAAG,CACHC,IAAI,CACJC,IAAI,CACJC,WAAW,CACXC,MAAM,CACNC,OAAO,CACPC,UAAU,CACVC,MAAM,KACD,eAAe,CACtB,OAASC,SAAS,CAAEC,UAAU,CAAEC,OAAO,KAAQ,qBAAqB,CACpE,OAASC,SAAS,CAAEC,IAAI,CAAEC,KAAK,CAAEC,KAAK,CAAEC,aAAa,CAAEC,OAAO,CAAEC,MAAM,CAAEC,mBAAmB,KAAQ,UAAU,CAC7G,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,QAAS,CAAAC,OAAOA,CAAA,CAAG,KAAAC,aAAA,CAAAC,aAAA,CAAAC,qBAAA,CAAAC,qBAAA,CAAAC,qBAAA,CACjB,KAAM,CAAAC,QAAQ,CAAGlC,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACmC,OAAO,CAAEC,UAAU,CAAC,CAAGtC,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACuC,OAAO,CAAEC,UAAU,CAAC,CAAGxC,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACyC,UAAU,CAAEC,aAAa,CAAC,CAAG1C,QAAQ,CAAC,KAAK,CAAC,CAEnDC,SAAS,CAAC,IAAM,CACd0C,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAnB,KAAK,CAACoB,GAAG,CAAC,sBAAsB,CAAC,CACxDP,UAAU,CAACM,QAAQ,CAACE,IAAI,CAAC,CAC3B,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CACjD,CAAC,OAAS,CACRP,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAS,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CAACC,MAAM,CAACC,OAAO,CAAC,0FAA0F,CAAC,CAAE,CAC/G,OACF,CAEAT,aAAa,CAAC,IAAI,CAAC,CACnB,GAAI,CACF,KAAM,CAAAE,QAAQ,CAAG,KAAM,CAAAnB,KAAK,CAAC2B,IAAI,CAAC,sBAAsB,CAAC,CACzD,GAAIR,QAAQ,CAACE,IAAI,CAACO,WAAW,CAAE,CAC7BC,KAAK,CAAC,kDAAkD,CAAC,CAC3D,CAAC,IAAM,CACLA,KAAK,CAACV,QAAQ,CAACE,IAAI,CAACS,OAAO,CAAC,CAC9B,CACF,CAAE,MAAOR,KAAK,CAAE,KAAAS,eAAA,CAAAC,oBAAA,CACdT,OAAO,CAACD,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CAClDO,KAAK,CAAC,6BAA6B,EAAI,EAAAE,eAAA,CAAAT,KAAK,CAACH,QAAQ,UAAAY,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBV,IAAI,UAAAW,oBAAA,iBAApBA,oBAAA,CAAsBC,MAAM,GAAIX,KAAK,CAACQ,OAAO,CAAC,CAAC,CACxF,CAAC,OAAS,CACRb,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,CAED,KAAM,CAAAiB,WAAW,CAAG,CAClB,CAAEC,KAAK,CAAE,YAAY,CAAEC,KAAK,CAAE,CAAAxB,OAAO,SAAPA,OAAO,kBAAAN,aAAA,CAAPM,OAAO,CAAEyB,IAAI,UAAA/B,aAAA,iBAAbA,aAAA,CAAegC,OAAO,CAAC,CAAC,CAAC,GAAI,KAAK,CAAEC,KAAK,CAAE,SAAU,CAAC,CACpF,CAAEJ,KAAK,CAAE,YAAY,CAAEC,KAAK,CAAE,CAAAxB,OAAO,SAAPA,OAAO,kBAAAL,aAAA,CAAPK,OAAO,CAAE4B,IAAI,UAAAjC,aAAA,iBAAbA,aAAA,CAAe+B,OAAO,CAAC,CAAC,CAAC,GAAI,KAAK,CAAEC,KAAK,CAAE,SAAU,CAAC,CACpF,CAAEJ,KAAK,CAAE,kBAAkB,CAAEC,KAAK,CAAE,CAAAxB,OAAO,SAAPA,OAAO,kBAAAJ,qBAAA,CAAPI,OAAO,CAAE6B,sBAAsB,UAAAjC,qBAAA,iBAA/BA,qBAAA,CAAiC8B,OAAO,CAAC,CAAC,CAAC,GAAI,KAAK,CAAEC,KAAK,CAAE,SAAU,CAAC,CAC5G,CAAEJ,KAAK,CAAE,eAAe,CAAEC,KAAK,CAAE,CAAAxB,OAAO,SAAPA,OAAO,kBAAAH,qBAAA,CAAPG,OAAO,CAAE8B,oBAAoB,UAAAjC,qBAAA,iBAA7BA,qBAAA,CAA+B6B,OAAO,CAAC,CAAC,CAAC,EAAG,GAAG,EAAI,KAAK,CAAEC,KAAK,CAAE,SAAU,CAAC,CAC7G,CAAEJ,KAAK,CAAE,mBAAmB,CAAEC,KAAK,CAAE,CAAAxB,OAAO,SAAPA,OAAO,kBAAAF,qBAAA,CAAPE,OAAO,CAAE+B,iBAAiB,UAAAjC,qBAAA,iBAA1BA,qBAAA,CAA4B4B,OAAO,CAAC,CAAC,CAAC,EAAG,GAAG,EAAI,KAAK,CAAEC,KAAK,CAAE,SAAU,CAAC,CAC/G,CAED,mBACEnC,KAAA,CAACvB,GAAG,EAAA+D,QAAA,eACF1C,IAAA,CAACjB,MAAM,EAAC4D,QAAQ,CAAC,QAAQ,CAAAD,QAAA,cACvBxC,KAAA,CAAClB,OAAO,EAAA0D,QAAA,eACN1C,IAAA,CAACf,UAAU,EAAC2D,IAAI,CAAC,OAAO,CAACP,KAAK,CAAC,SAAS,CAACQ,OAAO,CAAEA,CAAA,GAAMpC,QAAQ,CAAC,GAAG,CAAE,CAAAiC,QAAA,cACpE1C,IAAA,CAACb,SAAS,GAAE,CAAC,CACH,CAAC,cACba,IAAA,CAACtB,UAAU,EAACoE,OAAO,CAAC,IAAI,CAACC,SAAS,CAAC,KAAK,CAACC,EAAE,CAAE,CAAEC,QAAQ,CAAE,CAAE,CAAE,CAAAP,QAAA,CAAC,mBAE9D,CAAY,CAAC,cACb1C,IAAA,CAACd,MAAM,EACL4D,OAAO,CAAC,WAAW,CACnBT,KAAK,CAAC,WAAW,CACjBa,SAAS,cAAElD,IAAA,CAACX,OAAO,GAAE,CAAE,CACvBwD,OAAO,CAAEvB,aAAc,CACvB6B,QAAQ,CAAErC,UAAW,CAAA4B,QAAA,CAEpB5B,UAAU,CAAG,eAAe,CAAG,eAAe,CACzC,CAAC,EACF,CAAC,CACJ,CAAC,cAETZ,KAAA,CAAC1B,SAAS,EAAC4E,QAAQ,CAAC,IAAI,CAACJ,EAAE,CAAE,CAAEK,EAAE,CAAE,CAAC,CAAEC,EAAE,CAAE,CAAE,CAAE,CAAAZ,QAAA,eAC5C1C,IAAA,CAACpB,IAAI,EAAC2E,SAAS,MAACC,OAAO,CAAE,CAAE,CAAAd,QAAA,CACxBV,WAAW,CAACyB,GAAG,CAAC,CAACC,IAAI,CAAEC,KAAK,gBAC3B3D,IAAA,CAACpB,IAAI,EAACgF,IAAI,MAACC,EAAE,CAAE,EAAG,CAACC,EAAE,CAAE,CAAE,CAACC,EAAE,CAAE,CAAE,CAAArB,QAAA,cAC9B1C,IAAA,CAACnB,IAAI,EAAA6D,QAAA,cACHxC,KAAA,CAACpB,WAAW,EAAA4D,QAAA,eACV1C,IAAA,CAACtB,UAAU,EAAC2D,KAAK,CAAC,eAAe,CAAC2B,YAAY,MAAAtB,QAAA,CAC3CgB,IAAI,CAACzB,KAAK,CACD,CAAC,cACbjC,IAAA,CAACtB,UAAU,EAACoE,OAAO,CAAC,IAAI,CAACE,EAAE,CAAE,CAAEX,KAAK,CAAEqB,IAAI,CAACrB,KAAM,CAAE,CAAAK,QAAA,CAChDgB,IAAI,CAACxB,KAAK,CACD,CAAC,EACF,CAAC,CACV,CAAC,EAV6ByB,KAWhC,CACP,CAAC,CACE,CAAC,cAEPzD,KAAA,CAACzB,KAAK,EAACuE,EAAE,CAAE,CAAEiB,CAAC,CAAE,CAAC,CAAEZ,EAAE,CAAE,CAAE,CAAE,CAAAX,QAAA,eACzB1C,IAAA,CAACtB,UAAU,EAACoE,OAAO,CAAC,IAAI,CAACkB,YAAY,MAAAtB,QAAA,CAAC,6BAEtC,CAAY,CAAC,cACb1C,IAAA,CAACtB,UAAU,EAACoE,OAAO,CAAC,OAAO,CAACT,KAAK,CAAC,gBAAgB,CAAAK,QAAA,CAAC,8EAEnD,CAAY,CAAC,EACR,CAAC,EACC,CAAC,EACT,CAAC,CAEV,CAEA,cAAe,CAAAvC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}