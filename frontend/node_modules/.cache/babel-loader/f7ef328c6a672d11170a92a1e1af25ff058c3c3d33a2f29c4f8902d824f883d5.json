{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{Container,Typography,Button,Paper,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Box,AppBar,Toolbar,IconButton}from'@mui/material';import{Upload,Logout,Assessment}from'@mui/icons-material';import{useAuth}from'../context/AuthContext';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(){const[books,setBooks]=useState([]);const[loading,setLoading]=useState(true);const{logout}=useAuth();const navigate=useNavigate();useEffect(()=>{fetchBooks();},[]);const fetchBooks=async()=>{try{const response=await axios.get('/api/books');setBooks(response.data);}catch(error){console.error('Error fetching books:',error);}finally{setLoading(false);}};const handleFileUpload=async event=>{const file=event.target.files[0];if(!file)return;const formData=new FormData();formData.append('file',file);try{const response=await axios.post('/api/books/upload',formData,{headers:{'Content-Type':'multipart/form-data'}});alert(response.data.message||'Book uploaded successfully! Translation started.');fetchBooks();}catch(error){var _error$response,_error$response$data;console.error('Error uploading file:',error);alert('Error uploading file: '+(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||error.message));}};return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(AppBar,{position:\"static\",children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"div\",sx:{flexGrow:1},children:\"Translation AI System\"}),/*#__PURE__*/_jsx(IconButton,{color:\"inherit\",onClick:()=>navigate('/metrics'),children:/*#__PURE__*/_jsx(Assessment,{})}),/*#__PURE__*/_jsx(IconButton,{color:\"inherit\",onClick:logout,children:/*#__PURE__*/_jsx(Logout,{})})]})}),/*#__PURE__*/_jsxs(Container,{maxWidth:\"lg\",sx:{mt:4,mb:4},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',mb:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:\"Books\"}),/*#__PURE__*/_jsxs(Button,{variant:\"contained\",component:\"label\",startIcon:/*#__PURE__*/_jsx(Upload,{}),children:[\"Upload Book\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",hidden:true,accept:\".pdf,.docx,.epub\",onChange:handleFileUpload})]})]}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"ID\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Title (EN)\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Title (AZ)\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Author\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Status\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:books.map(book=>/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:book.id}),/*#__PURE__*/_jsx(TableCell,{children:book.title_en}),/*#__PURE__*/_jsx(TableCell,{children:book.title_az||'-'}),/*#__PURE__*/_jsx(TableCell,{children:book.author||'-'}),/*#__PURE__*/_jsx(TableCell,{children:book.status}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",size:\"small\",onClick:()=>navigate(\"/book/\".concat(book.id)),children:\"View\"})})]},book.id))})]})})]})]});}export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Container","Typography","Button","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Box","AppBar","Toolbar","IconButton","Upload","Logout","Assessment","useAuth","axios","jsx","_jsx","jsxs","_jsxs","Dashboard","books","setBooks","loading","setLoading","logout","navigate","fetchBooks","response","get","data","error","console","handleFileUpload","event","file","target","files","formData","FormData","append","post","headers","alert","message","_error$response","_error$response$data","detail","children","position","variant","component","sx","flexGrow","color","onClick","maxWidth","mt","mb","display","justifyContent","startIcon","type","hidden","accept","onChange","map","book","id","title_en","title_az","author","status","size","concat"],"sources":["/Users/airgroupairgroup/Desktop/MinA/Translation-AI/frontend/src/components/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Container,\n  Typography,\n  Button,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Box,\n  AppBar,\n  Toolbar,\n  IconButton,\n} from '@mui/material';\nimport { Upload, Logout, Assessment } from '@mui/icons-material';\nimport { useAuth } from '../context/AuthContext';\nimport axios from 'axios';\n\nfunction Dashboard() {\n  const [books, setBooks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const { logout } = useAuth();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    fetchBooks();\n  }, []);\n\n  const fetchBooks = async () => {\n    try {\n      const response = await axios.get('/api/books');\n      setBooks(response.data);\n    } catch (error) {\n      console.error('Error fetching books:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFileUpload = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    const formData = new FormData();\n    formData.append('file', file);\n\n    try {\n      const response = await axios.post('/api/books/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n      alert(response.data.message || 'Book uploaded successfully! Translation started.');\n      fetchBooks();\n    } catch (error) {\n      console.error('Error uploading file:', error);\n      alert('Error uploading file: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  return (\n    <Box>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\n            Translation AI System\n          </Typography>\n          <IconButton color=\"inherit\" onClick={() => navigate('/metrics')}>\n            <Assessment />\n          </IconButton>\n          <IconButton color=\"inherit\" onClick={logout}>\n            <Logout />\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n\n      <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 3 }}>\n          <Typography variant=\"h4\">Books</Typography>\n          <Button\n            variant=\"contained\"\n            component=\"label\"\n            startIcon={<Upload />}\n          >\n            Upload Book\n            <input\n              type=\"file\"\n              hidden\n              accept=\".pdf,.docx,.epub\"\n              onChange={handleFileUpload}\n            />\n          </Button>\n        </Box>\n\n        <TableContainer component={Paper}>\n          <Table>\n            <TableHead>\n              <TableRow>\n                <TableCell>ID</TableCell>\n                <TableCell>Title (EN)</TableCell>\n                <TableCell>Title (AZ)</TableCell>\n                <TableCell>Author</TableCell>\n                <TableCell>Status</TableCell>\n                <TableCell>Actions</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {books.map((book) => (\n                <TableRow key={book.id}>\n                  <TableCell>{book.id}</TableCell>\n                  <TableCell>{book.title_en}</TableCell>\n                  <TableCell>{book.title_az || '-'}</TableCell>\n                  <TableCell>{book.author || '-'}</TableCell>\n                  <TableCell>{book.status}</TableCell>\n                  <TableCell>\n                    <Button\n                      variant=\"outlined\"\n                      size=\"small\"\n                      onClick={() => navigate(`/book/${book.id}`)}\n                    >\n                      View\n                    </Button>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </Container>\n    </Box>\n  );\n}\n\nexport default Dashboard;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}