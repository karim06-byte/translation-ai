{"ast":null,"code":"var _jsxFileName = \"/Users/airgroupairgroup/Desktop/MinA/Translation-AI/frontend/src/components/BookView.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Container, Paper, Typography, Box, Button, TextField, Dialog, DialogTitle, DialogContent, DialogActions, Select, MenuItem, FormControl, InputLabel, Grid, AppBar, Toolbar, IconButton } from '@mui/material';\nimport { ArrowBack, Edit, Check, Close } from '@mui/icons-material';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction BookView() {\n  _s();\n  const {\n    bookId\n  } = useParams();\n  const navigate = useNavigate();\n  const [segments, setSegments] = useState([]);\n  const [book, setBook] = useState(null);\n  const [selectedSegment, setSelectedSegment] = useState(null);\n  const [overrideDialogOpen, setOverrideDialogOpen] = useState(false);\n  const [newTranslation, setNewTranslation] = useState('');\n  const [engine, setEngine] = useState('gemini');\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    fetchBook();\n    fetchSegments();\n\n    // Auto-refresh segments every 5 seconds to see translation progress\n    const interval = setInterval(() => {\n      fetchSegments();\n    }, 5000);\n    return () => clearInterval(interval);\n  }, [bookId]);\n  const fetchBook = async () => {\n    try {\n      const response = await axios.get(`/api/books/${bookId}`);\n      setBook(response.data);\n    } catch (error) {\n      console.error('Error fetching book:', error);\n    }\n  };\n  const fetchSegments = async () => {\n    try {\n      const response = await axios.get(`/api/segments/book/${bookId}?page=1&page_size=100&include_metrics=true`);\n      setSegments(response.data.segments);\n    } catch (error) {\n      console.error('Error fetching segments:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleTranslateAll = async () => {\n    if (!window.confirm('This will translate all pending segments. This may take a while. Continue?')) {\n      return;\n    }\n    try {\n      // Use sync=false for background, but you can test with sync=true\n      const response = await axios.post(`/api/books/${bookId}/translate-all?sync=false`);\n      alert(response.data.message || 'Translation started! Check terminal for progress.');\n      // Refresh segments periodically\n      const refreshInterval = setInterval(() => {\n        fetchSegments();\n        // Stop refreshing if all segments are translated\n        const allTranslated = segments.every(s => s.translated_az || s.status === 'translated');\n        if (allTranslated) {\n          clearInterval(refreshInterval);\n        }\n      }, 3000);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Error starting translation:', error);\n      alert('Error starting translation: ' + (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.detail) || error.message));\n    }\n  };\n  const handleTranslate = async (segmentId, sourceText) => {\n    try {\n      const response = await axios.post('/api/translate', {\n        source_en: sourceText,\n        segment_id: segmentId\n      });\n\n      // Update segment in local state\n      setSegments(prev => prev.map(s => s.id === segmentId ? {\n        ...s,\n        translated_az: response.data.translated_az,\n        status: 'translated'\n      } : s));\n    } catch (error) {\n      console.error('Error translating:', error);\n      alert('Error translating segment');\n    }\n  };\n  const handleRetranslate = async (segmentId, sourceText) => {\n    try {\n      const response = await axios.post('/api/translate/retranslate', {\n        segment_id: segmentId,\n        engine: engine,\n        source_text: sourceText\n      });\n      setNewTranslation(response.data.new_translation);\n    } catch (error) {\n      console.error('Error retranslating:', error);\n      alert('Error retranslating segment');\n    }\n  };\n  const handleOverride = async () => {\n    if (!selectedSegment || !newTranslation) return;\n    try {\n      await axios.post(`/api/segments/${selectedSegment.id}/override`, {\n        segment_id: selectedSegment.id,\n        new_translation: newTranslation,\n        engine: engine\n      });\n\n      // Update segment\n      setSegments(prev => prev.map(s => s.id === selectedSegment.id ? {\n        ...s,\n        translated_az: newTranslation,\n        status: 'overridden'\n      } : s));\n      setOverrideDialogOpen(false);\n      setSelectedSegment(null);\n      setNewTranslation('');\n    } catch (error) {\n      console.error('Error overriding:', error);\n      alert('Error saving override');\n    }\n  };\n  const openOverrideDialog = segment => {\n    setSelectedSegment(segment);\n    setNewTranslation(segment.translated_az || '');\n    setOverrideDialogOpen(true);\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      position: \"static\",\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          edge: \"start\",\n          color: \"inherit\",\n          onClick: () => navigate('/'),\n          children: /*#__PURE__*/_jsxDEV(ArrowBack, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          component: \"div\",\n          sx: {\n            flexGrow: 1\n          },\n          children: (book === null || book === void 0 ? void 0 : book.title_en) || 'Book'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"lg\",\n      sx: {\n        mt: 4,\n        mb: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mb: 3,\n          display: 'flex',\n          gap: 2,\n          alignItems: 'center',\n          justifyContent: 'space-between'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          children: [segments.filter(s => s.status === 'translated' || s.translated_az).length, \" / \", segments.length, \" segments translated\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), segments.some(s => s.status === 'pending' || !s.translated_az) && /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: handleTranslateAll,\n          children: \"Translate All Pending\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), segments.map(segment => /*#__PURE__*/_jsxDEV(Paper, {\n        sx: {\n          p: 3,\n          mb: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 2,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            md: 6,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle2\",\n              color: \"text.secondary\",\n              children: \"English (Source)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              sx: {\n                mb: 2\n              },\n              children: segment.source_en\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            md: 6,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle2\",\n              color: \"text.secondary\",\n              children: \"Azerbaijani (Translation)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              sx: {\n                mb: 2\n              },\n              children: segment.translated_az || 'Not translated'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 17\n            }, this), segment.metrics && segment.translated_az && /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                mt: 2,\n                p: 2,\n                bgcolor: 'grey.50',\n                borderRadius: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"subtitle2\",\n                gutterBottom: true,\n                children: \"Translation Metrics\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                spacing: 1,\n                children: [segment.metrics.style_similarity !== null && segment.metrics.style_similarity !== undefined && /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 6,\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"caption\",\n                    color: \"text.secondary\",\n                    children: \"Style Similarity:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body2\",\n                    sx: {\n                      fontWeight: 'bold'\n                    },\n                    children: [(segment.metrics.style_similarity * 100).toFixed(1), \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 223,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 25\n                }, this), segment.metrics.from_style_memory && /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 6,\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"caption\",\n                    color: \"text.secondary\",\n                    children: \"Source:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 230,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body2\",\n                    sx: {\n                      fontWeight: 'bold',\n                      color: 'success.main'\n                    },\n                    children: \"Style Memory\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 233,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 25\n                }, this), !segment.metrics.from_style_memory && segment.translated_az && /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 6,\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"caption\",\n                    color: \"text.secondary\",\n                    children: \"Source:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 240,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body2\",\n                    sx: {\n                      fontWeight: 'bold',\n                      color: 'primary.main'\n                    },\n                    children: \"AI Model\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 243,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 25\n                }, this), segment.metrics.has_override && /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"caption\",\n                    color: \"text.secondary\",\n                    children: \"Override Similarity:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 250,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body2\",\n                    sx: {\n                      fontWeight: 'bold'\n                    },\n                    children: segment.metrics.override_similarity !== null && segment.metrics.override_similarity !== undefined ? (segment.metrics.override_similarity * 100).toFixed(1) + '%' : 'N/A'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 253,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            gap: 1,\n            mt: 2\n          },\n          children: [!segment.translated_az && /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            size: \"small\",\n            onClick: () => handleTranslate(segment.id, segment.source_en),\n            children: \"Translate\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            size: \"small\",\n            startIcon: /*#__PURE__*/_jsxDEV(Edit, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 28\n            }, this),\n            onClick: () => openOverrideDialog(segment),\n            children: \"Edit/Override\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 13\n        }, this)]\n      }, segment.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: overrideDialogOpen,\n      onClose: () => setOverrideDialogOpen(false),\n      maxWidth: \"md\",\n      fullWidth: true,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: \"Override Translation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle2\",\n          sx: {\n            mb: 1\n          },\n          children: \"Source (English):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          sx: {\n            mb: 2,\n            p: 1,\n            bgcolor: 'grey.100'\n          },\n          children: selectedSegment === null || selectedSegment === void 0 ? void 0 : selectedSegment.source_en\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          fullWidth: true,\n          sx: {\n            mb: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n            children: \"Translation Engine\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            value: engine,\n            onChange: e => setEngine(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n              value: \"gemini\",\n              children: \"Gemini\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: \"chatgpt\",\n              children: \"ChatGPT\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          onClick: () => handleRetranslate(selectedSegment === null || selectedSegment === void 0 ? void 0 : selectedSegment.id, selectedSegment === null || selectedSegment === void 0 ? void 0 : selectedSegment.source_en),\n          sx: {\n            mb: 2\n          },\n          children: [\"Retranslate with \", engine]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          multiline: true,\n          rows: 6,\n          label: \"New Translation\",\n          value: newTranslation,\n          onChange: e => setNewTranslation(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setOverrideDialogOpen(false),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleOverride,\n          variant: \"contained\",\n          startIcon: /*#__PURE__*/_jsxDEV(Check, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 75\n          }, this),\n          children: \"Save Override\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 5\n  }, this);\n}\n_s(BookView, \"efrhgBF6Ufv5owIfF38r6JMxYtg=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = BookView;\nexport default BookView;\nvar _c;\n$RefreshReg$(_c, \"BookView\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Container","Paper","Typography","Box","Button","TextField","Dialog","DialogTitle","DialogContent","DialogActions","Select","MenuItem","FormControl","InputLabel","Grid","AppBar","Toolbar","IconButton","ArrowBack","Edit","Check","Close","axios","jsxDEV","_jsxDEV","BookView","_s","bookId","navigate","segments","setSegments","book","setBook","selectedSegment","setSelectedSegment","overrideDialogOpen","setOverrideDialogOpen","newTranslation","setNewTranslation","engine","setEngine","loading","setLoading","fetchBook","fetchSegments","interval","setInterval","clearInterval","response","get","data","error","console","handleTranslateAll","window","confirm","post","alert","message","refreshInterval","allTranslated","every","s","translated_az","status","_error$response","_error$response$data","detail","handleTranslate","segmentId","sourceText","source_en","segment_id","prev","map","id","handleRetranslate","source_text","new_translation","handleOverride","openOverrideDialog","segment","children","position","edge","color","onClick","fileName","_jsxFileName","lineNumber","columnNumber","variant","component","sx","flexGrow","title_en","maxWidth","mt","mb","display","gap","alignItems","justifyContent","filter","length","some","p","container","spacing","item","xs","md","metrics","bgcolor","borderRadius","gutterBottom","style_similarity","undefined","fontWeight","toFixed","from_style_memory","has_override","override_similarity","size","startIcon","open","onClose","fullWidth","value","onChange","e","target","multiline","rows","label","_c","$RefreshReg$"],"sources":["/Users/airgroupairgroup/Desktop/MinA/Translation-AI/frontend/src/components/BookView.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport {\n  Container,\n  Paper,\n  Typography,\n  Box,\n  Button,\n  TextField,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Select,\n  MenuItem,\n  FormControl,\n  InputLabel,\n  Grid,\n  AppBar,\n  Toolbar,\n  IconButton,\n} from '@mui/material';\nimport { ArrowBack, Edit, Check, Close } from '@mui/icons-material';\nimport axios from 'axios';\n\nfunction BookView() {\n  const { bookId } = useParams();\n  const navigate = useNavigate();\n  const [segments, setSegments] = useState([]);\n  const [book, setBook] = useState(null);\n  const [selectedSegment, setSelectedSegment] = useState(null);\n  const [overrideDialogOpen, setOverrideDialogOpen] = useState(false);\n  const [newTranslation, setNewTranslation] = useState('');\n  const [engine, setEngine] = useState('gemini');\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchBook();\n    fetchSegments();\n    \n    // Auto-refresh segments every 5 seconds to see translation progress\n    const interval = setInterval(() => {\n      fetchSegments();\n    }, 5000);\n    \n    return () => clearInterval(interval);\n  }, [bookId]);\n\n  const fetchBook = async () => {\n    try {\n      const response = await axios.get(`/api/books/${bookId}`);\n      setBook(response.data);\n    } catch (error) {\n      console.error('Error fetching book:', error);\n    }\n  };\n\n  const fetchSegments = async () => {\n    try {\n      const response = await axios.get(`/api/segments/book/${bookId}?page=1&page_size=100&include_metrics=true`);\n      setSegments(response.data.segments);\n    } catch (error) {\n      console.error('Error fetching segments:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleTranslateAll = async () => {\n    if (!window.confirm('This will translate all pending segments. This may take a while. Continue?')) {\n      return;\n    }\n    \n    try {\n      // Use sync=false for background, but you can test with sync=true\n      const response = await axios.post(`/api/books/${bookId}/translate-all?sync=false`);\n      alert(response.data.message || 'Translation started! Check terminal for progress.');\n      // Refresh segments periodically\n      const refreshInterval = setInterval(() => {\n        fetchSegments();\n        // Stop refreshing if all segments are translated\n        const allTranslated = segments.every(s => s.translated_az || s.status === 'translated');\n        if (allTranslated) {\n          clearInterval(refreshInterval);\n        }\n      }, 3000);\n    } catch (error) {\n      console.error('Error starting translation:', error);\n      alert('Error starting translation: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const handleTranslate = async (segmentId, sourceText) => {\n    try {\n      const response = await axios.post('/api/translate', {\n        source_en: sourceText,\n        segment_id: segmentId,\n      });\n      \n      // Update segment in local state\n      setSegments((prev) =>\n        prev.map((s) =>\n          s.id === segmentId\n            ? { ...s, translated_az: response.data.translated_az, status: 'translated' }\n            : s\n        )\n      );\n    } catch (error) {\n      console.error('Error translating:', error);\n      alert('Error translating segment');\n    }\n  };\n\n  const handleRetranslate = async (segmentId, sourceText) => {\n    try {\n      const response = await axios.post('/api/translate/retranslate', {\n        segment_id: segmentId,\n        engine: engine,\n        source_text: sourceText,\n      });\n      \n      setNewTranslation(response.data.new_translation);\n    } catch (error) {\n      console.error('Error retranslating:', error);\n      alert('Error retranslating segment');\n    }\n  };\n\n  const handleOverride = async () => {\n    if (!selectedSegment || !newTranslation) return;\n\n    try {\n      await axios.post(`/api/segments/${selectedSegment.id}/override`, {\n        segment_id: selectedSegment.id,\n        new_translation: newTranslation,\n        engine: engine,\n      });\n\n      // Update segment\n      setSegments((prev) =>\n        prev.map((s) =>\n          s.id === selectedSegment.id\n            ? { ...s, translated_az: newTranslation, status: 'overridden' }\n            : s\n        )\n      );\n\n      setOverrideDialogOpen(false);\n      setSelectedSegment(null);\n      setNewTranslation('');\n    } catch (error) {\n      console.error('Error overriding:', error);\n      alert('Error saving override');\n    }\n  };\n\n  const openOverrideDialog = (segment) => {\n    setSelectedSegment(segment);\n    setNewTranslation(segment.translated_az || '');\n    setOverrideDialogOpen(true);\n  };\n\n  return (\n    <Box>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <IconButton edge=\"start\" color=\"inherit\" onClick={() => navigate('/')}>\n            <ArrowBack />\n          </IconButton>\n          <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\n            {book?.title_en || 'Book'}\n          </Typography>\n        </Toolbar>\n      </AppBar>\n\n      <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\n        <Box sx={{ mb: 3, display: 'flex', gap: 2, alignItems: 'center', justifyContent: 'space-between' }}>\n          <Typography variant=\"h6\">\n            {segments.filter(s => s.status === 'translated' || s.translated_az).length} / {segments.length} segments translated\n          </Typography>\n          {segments.some(s => s.status === 'pending' || !s.translated_az) && (\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={handleTranslateAll}\n            >\n              Translate All Pending\n            </Button>\n          )}\n        </Box>\n        \n        {segments.map((segment) => (\n          <Paper key={segment.id} sx={{ p: 3, mb: 2 }}>\n            <Grid container spacing={2}>\n              <Grid item xs={12} md={6}>\n                <Typography variant=\"subtitle2\" color=\"text.secondary\">\n                  English (Source)\n                </Typography>\n                <Typography variant=\"body1\" sx={{ mb: 2 }}>\n                  {segment.source_en}\n                </Typography>\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <Typography variant=\"subtitle2\" color=\"text.secondary\">\n                  Azerbaijani (Translation)\n                </Typography>\n                <Typography variant=\"body1\" sx={{ mb: 2 }}>\n                  {segment.translated_az || 'Not translated'}\n                </Typography>\n                \n                {/* Segment Metrics */}\n                {segment.metrics && segment.translated_az && (\n                  <Box sx={{ mt: 2, p: 2, bgcolor: 'grey.50', borderRadius: 1 }}>\n                    <Typography variant=\"subtitle2\" gutterBottom>\n                      Translation Metrics\n                    </Typography>\n                    <Grid container spacing={1}>\n                      {segment.metrics.style_similarity !== null && segment.metrics.style_similarity !== undefined && (\n                        <Grid item xs={6}>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            Style Similarity:\n                          </Typography>\n                          <Typography variant=\"body2\" sx={{ fontWeight: 'bold' }}>\n                            {(segment.metrics.style_similarity * 100).toFixed(1)}%\n                          </Typography>\n                        </Grid>\n                      )}\n                      {segment.metrics.from_style_memory && (\n                        <Grid item xs={6}>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            Source:\n                          </Typography>\n                          <Typography variant=\"body2\" sx={{ fontWeight: 'bold', color: 'success.main' }}>\n                            Style Memory\n                          </Typography>\n                        </Grid>\n                      )}\n                      {!segment.metrics.from_style_memory && segment.translated_az && (\n                        <Grid item xs={6}>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            Source:\n                          </Typography>\n                          <Typography variant=\"body2\" sx={{ fontWeight: 'bold', color: 'primary.main' }}>\n                            AI Model\n                          </Typography>\n                        </Grid>\n                      )}\n                      {segment.metrics.has_override && (\n                        <Grid item xs={12}>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            Override Similarity:\n                          </Typography>\n                          <Typography variant=\"body2\" sx={{ fontWeight: 'bold' }}>\n                            {segment.metrics.override_similarity !== null && segment.metrics.override_similarity !== undefined\n                              ? (segment.metrics.override_similarity * 100).toFixed(1) + '%'\n                              : 'N/A'}\n                          </Typography>\n                        </Grid>\n                      )}\n                    </Grid>\n                  </Box>\n                )}\n              </Grid>\n            </Grid>\n\n            <Box sx={{ display: 'flex', gap: 1, mt: 2 }}>\n              {!segment.translated_az && (\n                <Button\n                  variant=\"outlined\"\n                  size=\"small\"\n                  onClick={() => handleTranslate(segment.id, segment.source_en)}\n                >\n                  Translate\n                </Button>\n              )}\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                startIcon={<Edit />}\n                onClick={() => openOverrideDialog(segment)}\n              >\n                Edit/Override\n              </Button>\n            </Box>\n          </Paper>\n        ))}\n      </Container>\n\n      <Dialog open={overrideDialogOpen} onClose={() => setOverrideDialogOpen(false)} maxWidth=\"md\" fullWidth>\n        <DialogTitle>Override Translation</DialogTitle>\n        <DialogContent>\n          <Typography variant=\"subtitle2\" sx={{ mb: 1 }}>\n            Source (English):\n          </Typography>\n          <Typography variant=\"body2\" sx={{ mb: 2, p: 1, bgcolor: 'grey.100' }}>\n            {selectedSegment?.source_en}\n          </Typography>\n\n          <FormControl fullWidth sx={{ mb: 2 }}>\n            <InputLabel>Translation Engine</InputLabel>\n            <Select value={engine} onChange={(e) => setEngine(e.target.value)}>\n              <MenuItem value=\"gemini\">Gemini</MenuItem>\n              <MenuItem value=\"chatgpt\">ChatGPT</MenuItem>\n            </Select>\n          </FormControl>\n\n          <Button\n            variant=\"outlined\"\n            onClick={() => handleRetranslate(selectedSegment?.id, selectedSegment?.source_en)}\n            sx={{ mb: 2 }}\n          >\n            Retranslate with {engine}\n          </Button>\n\n          <TextField\n            fullWidth\n            multiline\n            rows={6}\n            label=\"New Translation\"\n            value={newTranslation}\n            onChange={(e) => setNewTranslation(e.target.value)}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOverrideDialogOpen(false)}>Cancel</Button>\n          <Button onClick={handleOverride} variant=\"contained\" startIcon={<Check />}>\n            Save Override\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n}\n\nexport default BookView;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}